<!-- Image and text -->
<nav
  class="navbar navbar-primary position-absolute py-3 w-100"
  style="background: rgba(0, 0, 0, 0.63); z-index: 5; top: 0"
>
  <div class="container">
    <img
      src="assets/authentication/img/core-img/logo.png"
      width="173"
      class="d-inline-block align-top"
      alt=""
    />
  </div>
</nav>

<div class="bg-wrapper"></div>

<div class="login-box" style="width: 30%">
  <div class="card">
    <div class="card-body">
      <div class="card-title m-0">
        <h4 class="card-text text-center font-weight-bold mb-4">
          Đăng ký tài khoản
        </h4>
      </div>

      <form #form="ngForm" (ngSubmit)="register()">
        <div>
          <div class="mb-3 input-group flex-column">
            <input
              type="text"
              class="form-control w-100 mb-2"
              name="phoneNumber"
              id="phoneNumber"
              placeholder="Số điện thoại ..."
              ngModel
            />
            <div
              *ngIf="
                form.controls['phoneNumber']?.invalid &&
                (form.controls['phoneNumber']?.dirty ||
                  form.controls['phoneNumber']?.touched)
              "
              class="d-flex align-item-center"
            >
              <div *ngIf="form.controls['phoneNumber'].hasError('required')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger">Vui lòng nhập số điện thoại.</small>
              </div>
              <div *ngIf="form.controls['phoneNumber'].hasError('pattern')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger">Số điện thoại không hợp lệ.</small>
              </div>
            </div>
          </div>

          <div class="mb-3 input-group flex-column">
            <input
              type="email"
              class="form-control w-100 mb-2"
              name="email"
              id="email"
              placeholder="Địa chỉ e-mail ..."
              ngModel
            />
            <div
              *ngIf="
                form.controls['email']?.invalid &&
                (form.controls['email']?.dirty ||
                  form.controls['email']?.touched)
              "
              class="d-flex align-item-center"
            >
              <div *ngIf="form.controls['email'].hasError('required')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger">Vui lòng nhập địa chỉ email.</small>
              </div>
              <div *ngIf="form.controls['email'].hasError('email')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger">Địa chỉ email không hợp lệ.</small>
              </div>
            </div>
          </div>

          <div class="mb-3 input-group">
            <input
              type="password"
              class="form-control w-100 mb-2"
              name="password"
              id="password"
              placeholder="Mật khẩu ..."
              ngModel
            />
            <div
              *ngIf="
                form.controls['password']?.invalid &&
                (form.controls['password']?.dirty ||
                  form.controls['password']?.touched)
              "
              class="d-flex align-item-center"
            >
              <div *ngIf="form.controls['password'].hasError('required')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger">Vui lòng nhập mật khẩu.</small>
              </div>
              <div *ngIf="form.controls['password'].hasError('minlength')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger"
                  >Mật khẩu yêu cầu ít nhất 8 ký tự.</small
                >
              </div>
              <div *ngIf="form.controls['password'].hasError('maxlength')">
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger"
                  >Mật khẩu yêu cầu không vượt quá 16 ký tự.</small
                >
              </div>
            </div>
          </div>

          <div class="mb-3 input-group">
            <input
              type="password"
              class="form-control w-100 mb-2"
              name="rePassword"
              id="rePassword"
              placeholder="Nhập lại mật khẩu ..."
              ngModel
            />
            <div
              *ngIf="
                form.controls['rePassword']?.invalid &&
                (form.controls['rePassword']?.dirty ||
                  form.controls['rePassword']?.touched)
              "
              class="d-flex align-item-center"
            >
              <div
                *ngIf="
                  form.controls['rePassword'].hasError('required');
                  else checkPasswordMismatch
                "
              >
                <i
                  class="fa-solid fa-circle-exclamation text-danger mr-2"
                  style="padding-top: 2px"
                ></i>
                <small class="text-danger"
                  >Vui lòng nhập mật khẩu xác nhận.</small
                >
              </div>
              <ng-template #checkPasswordMismatch>
                <div
                  *ngIf="
                    form.controls['rePassword'].hasError('passwordMismatch')
                  "
                >
                  <i
                    class="fa-solid fa-circle-exclamation text-danger mr-2"
                    style="padding-top: 2px"
                  ></i>
                  <small class="text-danger"
                    >Mật khẩu xác nhận không khớp.</small
                  >
                </div>
              </ng-template>
            </div>
          </div>

          <div class="mb-3 text-center">
            <button
              type="submit"
              class="btn palatin-btn btn-block w-100"
              style="height: 48px; line-height: 48px"
              data-toggle="modal"
              data-target="#verifyCodeModal"
              disabled
              [disabled]="loginOrRegisterButtonDisable"
            >
              Đăng ký
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="verifyCodeModal"
  tabindex="-1"
  role="dialog"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-body d-column justify-content-center">
        <div class="text-center mb-3">
          <h4 class="text-center text-bold">Kiểm tra hộp thư email</h4>
          Chúng tôi đã gửi một mã xác nhận tới địa chỉ email
          tungnguyenn050499@gmail.com. <br />
          Vui lòng nhập mã xác nhận để tiếp tục.
        </div>

        <form #formVerifyCode="ngForm" (ngSubmit)="verifyCode()">
          <div
            class="form-group d-flex justify-content-center align-items-start"
          >
            <div class="input-group flex-column col-md-8 mr-3">
              <input
                type="text"
                class="form-control d-inline w-100"
                name="verificationCode"
                id="verificationCode"
                placeholder="Nhập mã xác nhận ..."
                ngModel
              />
              <div
                *ngIf="
                  formVerifyCode.controls['verificationCode']?.invalid &&
                  (formVerifyCode.controls['verificationCode']?.dirty ||
                    formVerifyCode.controls['verificationCode']?.touched)
                "
                class="d-flex align-item-center"
              >
                <div
                  *ngIf="
                    formVerifyCode.controls['verificationCode'].hasError(
                      'required'
                    )
                  "
                >
                  <i
                    class="fa-solid fa-circle-exclamation text-danger mr-2"
                    style="padding-top: 2px"
                  ></i>
                  <small class="text-danger">Vui lòng nhập mã xác nhận.</small>
                </div>
                <div
                  *ngIf="
                    formVerifyCode.controls['verificationCode'].hasError(
                      'minlength'
                    ) ||
                    formVerifyCode.controls['verificationCode'].hasError(
                      'maxlength'
                    )
                  "
                >
                  <i
                    class="fa-solid fa-circle-exclamation text-danger mr-2"
                    style="padding-top: 2px"
                  ></i>
                  <small class="text-danger"
                    >Mã xác nhận phải bao gồm 6 ký tự.</small
                  >
                </div>
              </div>
            </div>

            <input
              type="submit"
              class="btn-2 palatin-btn btn-block col-md-3 p-0"
              style="height: 38px; line-height: 43px"
              value="Xác nhận"
            />
          </div>
        </form>
      </div>
    </div>
  </div>
</div>